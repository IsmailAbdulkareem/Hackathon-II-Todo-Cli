{
  "$schema": "https://modelcontextprotocol.io/schemas/tool-definition.json",
  "version": "1.0.0",
  "server": {
    "name": "todo-mcp-server",
    "version": "1.0.0",
    "description": "MCP server exposing todo task management operations for AI agents"
  },
  "tools": [
    {
      "name": "add_task",
      "description": "Create a new task for the user. Use this when the user wants to add, create, or remember something.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User identifier (UUID format)",
            "format": "uuid"
          },
          "title": {
            "type": "string",
            "description": "Task title (max 200 characters)",
            "maxLength": 200,
            "minLength": 1
          },
          "description": {
            "type": "string",
            "description": "Optional task description (max 2000 characters)",
            "maxLength": 2000
          }
        },
        "required": ["user_id", "title"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Unique task identifier"
          },
          "status": {
            "type": "string",
            "enum": ["created", "error"],
            "description": "Operation status"
          },
          "title": {
            "type": "string",
            "description": "Task title"
          },
          "error": {
            "type": "string",
            "description": "Error message if status is 'error'"
          }
        },
        "required": ["status"]
      }
    },
    {
      "name": "list_tasks",
      "description": "Retrieve tasks from the user's task list. Use this when the user wants to see, show, or list their tasks. Supports filtering by completion status.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User identifier (UUID format)",
            "format": "uuid"
          },
          "status": {
            "type": "string",
            "enum": ["all", "pending", "completed"],
            "default": "all",
            "description": "Filter tasks by completion status"
          }
        },
        "required": ["user_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "tasks": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "Task identifier"
                },
                "title": {
                  "type": "string",
                  "description": "Task title"
                },
                "description": {
                  "type": "string",
                  "description": "Task description (may be null)"
                },
                "completed": {
                  "type": "boolean",
                  "description": "Completion status"
                },
                "created_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Creation timestamp"
                },
                "updated_at": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Last update timestamp"
                }
              }
            }
          },
          "count": {
            "type": "integer",
            "description": "Number of tasks returned"
          }
        }
      }
    },
    {
      "name": "complete_task",
      "description": "Mark a task as complete. Use this when the user says they finished, completed, or are done with a task.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User identifier (UUID format)",
            "format": "uuid"
          },
          "task_id": {
            "type": "string",
            "description": "Task identifier to mark complete"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Task identifier"
          },
          "status": {
            "type": "string",
            "enum": ["completed", "error"],
            "description": "Operation status"
          },
          "title": {
            "type": "string",
            "description": "Task title"
          },
          "error": {
            "type": "string",
            "description": "Error message if status is 'error'"
          }
        },
        "required": ["status"]
      }
    },
    {
      "name": "delete_task",
      "description": "Remove a task from the user's list. Use this when the user wants to delete, remove, or cancel a task.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User identifier (UUID format)",
            "format": "uuid"
          },
          "task_id": {
            "type": "string",
            "description": "Task identifier to delete"
          }
        },
        "required": ["user_id", "task_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Task identifier"
          },
          "status": {
            "type": "string",
            "enum": ["deleted", "error"],
            "description": "Operation status"
          },
          "title": {
            "type": "string",
            "description": "Task title"
          },
          "error": {
            "type": "string",
            "description": "Error message if status is 'error'"
          }
        },
        "required": ["status"]
      }
    },
    {
      "name": "update_task",
      "description": "Modify a task's title or description. Use this when the user wants to change, update, or edit a task.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "description": "User identifier (UUID format)",
            "format": "uuid"
          },
          "task_id": {
            "type": "string",
            "description": "Task identifier to update"
          },
          "title": {
            "type": "string",
            "description": "New task title (max 200 characters)",
            "maxLength": 200
          },
          "description": {
            "type": "string",
            "description": "New task description (max 2000 characters)",
            "maxLength": 2000
          }
        },
        "required": ["user_id", "task_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "type": "string",
            "description": "Task identifier"
          },
          "status": {
            "type": "string",
            "enum": ["updated", "error"],
            "description": "Operation status"
          },
          "title": {
            "type": "string",
            "description": "Updated task title"
          },
          "error": {
            "type": "string",
            "description": "Error message if status is 'error'"
          }
        },
        "required": ["status"]
      }
    }
  ],
  "errorHandling": {
    "taskNotFound": {
      "code": "TASK_NOT_FOUND",
      "message": "Task not found or does not belong to user",
      "httpStatus": 404
    },
    "validationError": {
      "code": "VALIDATION_ERROR",
      "message": "Input validation failed (e.g., character limits exceeded)",
      "httpStatus": 400
    },
    "authorizationError": {
      "code": "AUTHORIZATION_ERROR",
      "message": "User not authorized to access this task",
      "httpStatus": 403
    },
    "databaseError": {
      "code": "DATABASE_ERROR",
      "message": "Database operation failed",
      "httpStatus": 500
    }
  },
  "usage": {
    "authentication": "Tools receive user_id parameter. Backend validates JWT token before invoking tools.",
    "authorization": "All tools validate that task belongs to user_id before performing operations.",
    "stateManagement": "Tools are stateless. All state persisted to PostgreSQL database.",
    "errorRecovery": "Tools return structured error responses. AI agent presents user-friendly messages."
  }
}
